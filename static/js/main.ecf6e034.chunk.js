(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={container:"alarmSettings_container__26OL9",icon:"alarmSettings_icon__bR6g4",selected:"alarmSettings_selected__3IFRH",disarmed:"alarmSettings_disarmed__xsaJ7",away:"alarmSettings_away__1bvIy",home:"alarmSettings_home__OSVvI",subtext:"alarmSettings_subtext__1vyGc"}},,,,function(e,t,n){e.exports={imageContainer:"home_imageContainer__1Wj6w",image:"home_image__3dMt6",comingHomeContainer:"home_comingHomeContainer__3l_LU",response:"home_response__34pb-",responseError:"home_responseError__3Z3SK",lightsSection:"home_lightsSection__1mgpW"}},,,,,function(e,t,n){e.exports={navbar:"header_navbar__2pgbU",drawer:"header_drawer__3MjeG",isOpen:"header_isOpen__VPvVq",hamburgerIcon:"header_hamburgerIcon__2_LOH",title:"header_title__1NgUY"}},function(e,t,n){e.exports={container:"iconHamburger_container__a5UjP",bar1:"iconHamburger_bar1__2Xvwe",bar2:"iconHamburger_bar2__1qd8t",bar3:"iconHamburger_bar3__3Vvt0",selected:"iconHamburger_selected__3uoeA"}},function(e,t,n){e.exports={circle:"environmentSelection_circle__l0Qp0",black:"environmentSelection_black__QRZ3m",red:"environmentSelection_red__1TNHM",green:"environmentSelection_green__1q5Hi",blue:"environmentSelection_blue__Zr7r6"}},,,,,function(e,t,n){e.exports={container:"login_container__KfNrD",submit:"login_submit__1Cw2a",header:"login_header__2p1Rx"}},function(e,t,n){e.exports={row:"settingsRow_row__2ldd0",inputDescription:"settingsRow_inputDescription__2y3IY",inputField:"settingsRow_inputField__3WGK1"}},function(e,t,n){e.exports={container:"toggle_container__3iGg6",selected:"toggle_selected__uWjCN",knob:"toggle_knob__16LKp"}},,,function(e,t,n){e.exports={container:"gateOpener_container__2XCM_",hidden:"gateOpener_hidden__a1Usl",logs:"gateOpener_logs__1QQ2T"}},function(e,t,n){e.exports={container:"doorman_container__3ecA5",response:"doorman_response__3hBwc"}},,,,,,,,,function(e,t,n){},function(e,t,n){e.exports={container:"spinner_container__Z3_hD"}},function(e,t,n){e.exports={container:"settings_container__2b3Xy"}},function(e,t,n){e.exports={container:"input_container__2oOob"}},function(e,t,n){e.exports={container:"devices_container__3za6S"}},function(e,t,n){e.exports=n(62)},,,,,function(e,t,n){},,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(36),o=n.n(c),i=(n(49),n(21)),u=n(7),s=n(1),l=n.n(s),p=n(2),m=n(3),h=n(4),f=n(22),v=n(20),d=n(23),b=n(5),g=n(17),E=n.n(g),_={local:{serverPath:"https://artem.redirectme.net",appRoot:"/home"},prod:{serverPath:"https://artemcams.serveo.net",appRoot:"/home"},dev:{serverPath:"http://localhost:8082",appRoot:"/home"}},w=localStorage.getItem("env")||"prod";function x(e){w=e,localStorage.setItem("env",e)}var k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:w;return _[t][e]},O="undefined"!==typeof localStorage,y=new(function(){function e(){Object(m.a)(this,e),this.memoryStore={},this.lastExpirationCheck=0}return Object(h.a)(e,[{key:"_checkForExpired",value:function(){if(!(Date.now()<this.lastExpirationCheck+36e5)){this.lastExpirationCheck=Date.now();var e=this._getStore();Object.keys(e).forEach(function(t){e[t].expiration<Date.now()&&delete e[t]}),this._setStore(e)}}},{key:"_getStore",value:function(){if(O){var e=localStorage.getItem("ARTEM_DATA_STORE");if(e)return JSON.parse(e)}return this.memoryStore}},{key:"_setStore",value:function(e){this._checkForExpired(),this.memoryStore=e,O&&localStorage.setItem("ARTEM_DATA_STORE",JSON.stringify(e))}},{key:"set",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12096e5,a=this._getStore();return a[e]={expiration:Date.now()+n,value:t},this._setStore(a),t}},{key:"get",value:function(e){var t=this._getStore()[e];if(t)return t.expiration<Date.now()?this.clear(e):t.value}},{key:"clear",value:function(e){var t=this._getStore();delete t[e],this._setStore(t)}}]),e}()),j=new(function(){function e(){Object(m.a)(this,e),this.auth=null}return Object(h.a)(e,[{key:"setAuth",value:function(e){this.auth=e||null,y.set("auth",e)}},{key:"clearAuth",value:function(){this.auth=null,y.clear("auth")}},{key:"getToken",value:function(){return null===this.auth&&this.setAuth(y.get("auth")),null===this.auth?null:this.auth.token}}]),e}()),S=function(){return null===j.getToken()?r.a.createElement(u.a,{to:"".concat(k("appRoot"),"/login")}):null},q=n(18),N=n.n(q),C=function(e){var t=[N.a.container,e.value?N.a.selected:""].join(" ");return r.a.createElement("div",{className:t,onClick:function(){return e.onChange(!e.value)}},r.a.createElement("div",{className:N.a.bar1}),r.a.createElement("div",{className:N.a.bar2}),r.a.createElement("div",{className:N.a.bar3}))},T={"":"Home",cams:"Cams",gate:"Gate",doorman:"Doorman",devices:"Devices",settings:"Settings",login:"Login",logout:"Logout"};Object.keys(T).forEach(function(e){T["".concat(k("appRoot"),"/").concat(e)]=T[e],delete T[e]});var A=function(){var e=Object(a.useState)(!1),t=Object(b.a)(e,2),n=t[0],c=t[1],o=[E.a.drawer,n?E.a.isOpen:""].join(" "),u="";return Object.keys(T).forEach(function(e){window.location.pathname.match(new RegExp("^".concat(e)))&&(u=T[e])}),r.a.createElement("div",{className:E.a.navbar},r.a.createElement(S,null),r.a.createElement("div",{className:E.a.title},u),r.a.createElement("div",{className:E.a.hamburgerIcon},r.a.createElement(C,{value:n,onChange:c})),r.a.createElement("div",{className:o},Object.keys(T).map(function(e){return r.a.createElement(i.b,{key:e,to:e},T[e])})))},R=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getTotalCameras",value:function(){var e=Object(p.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",3);case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"getCameraImage",value:function(){var e=Object(p.a)(l.a.mark(function e(t){var n,a,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return a=fetch("".concat(k("serverPath"),"/api/img/").concat(t),{method:"GET",headers:{Authorization:n}}),e.next=6,Promise.race([a,new Promise(function(e){return setTimeout(function(){return e({blob:function(){return""}})},5e3)})]);case 6:return r=e.sent,e.next=9,r.blob();case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),U=n(39),D=n.n(U),I=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={images:[],totalCameras:0},n.mounted=!1,n.fetchImages=Object(p.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n.mounted){e.next=2;break}return e.abrupt("return");case 2:t=l.a.mark(function e(t){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,R.getCameraImage(t);case 3:if(a=e.sent,r=URL.createObjectURL(a),n.mounted){e.next=7;break}return e.abrupt("return","break");case 7:n.setState(function(e){var n=e.images.slice();return n.splice(t,1,r),{images:n}}),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}},e,null,[[0,10]])}),a=0;case 4:if(!(a<n.state.totalCameras)){e.next=12;break}return e.delegateYield(t(a),"t0",6);case 6:if("break"!==e.t0){e.next=9;break}return e.abrupt("break",12);case 9:a++,e.next=4;break;case 12:setTimeout(n.fetchImages,1e3);case 13:case"end":return e.stop()}},e)})),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.mounted=!0,e.next=3,R.getTotalCameras();case 3:if(t=e.sent,this.mounted){e.next=6;break}return e.abrupt("return");case 6:this.setState({totalCameras:t}),this.fetchImages();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),this.state.images.map(function(e,t){return r.a.createElement("img",{className:D.a.image,key:t,alt:"cam",src:e})}))}}]),t}(r.a.Component),P=n(29),H=n.n(P),L=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"openGate",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/keypad/open"),{method:"POST",headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"getLogs",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/keypad/logs"),{method:"GET",headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}()),M=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1];n||L.getLogs().then(c);var o=Object(a.useState)(""),i=Object(b.a)(o,2),u=i[0],s=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:H.a.container},r.a.createElement("input",{type:"submit",value:"Open Gate",onClick:function(){return L.openGate().then(s)}}),r.a.createElement("div",null,u),r.a.createElement("div",{className:H.a.logs},n.split("\n").reverse().join("\n"))))},z=n(30),Z=n.n(z),F=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"comingHome",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/announce/coming_home"),{method:"POST",headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:if(a=e.sent,!(n.status>=400)){e.next=11;break}throw new Error(a);case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}()),G=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:Z.a.container},r.a.createElement("input",{type:"submit",value:"Coming Home",onClick:function(){F.comingHome().then(c).catch(console.error.bind(console))}}),r.a.createElement("div",{className:Z.a.response},n)))},W=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"currentDevices",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/nearby_devices/current"),{headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"allDevices",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/nearby_devices/all"),{headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}()),J=function(){var e=Object(a.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1];return n||W.currentDevices().then(c).catch(console.error.bind(console)),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("h1",null,"Nearby Devices"),r.a.createElement("div",{id:"current",dangerouslySetInnerHTML:{__html:n}}),r.a.createElement("h1",null,"All Devices"),r.a.createElement("div",{id:"all"}))},K=n(24),Q=n.n(K),V=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"login",value:function(){var e=Object(p.a)(l.a.mark(function e(t,n){var a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(k("serverPath"),"/api/login"),{method:"POST",body:JSON.stringify({username:t,password:n,redirect:!1}),headers:{"Content-Type":"application/json"}});case 2:return a=e.sent,e.next=5,a.json();case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),B=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(f.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={loggedIn:!1,username:"",password:""},n.login=function(){var e=Object(p.a)(l.a.mark(function e(t){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,V.login(n.state.username,n.state.password);case 3:a=e.sent,j.setAuth(a),n.setState({});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),n}return Object(d.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=this;return null!==j.getToken()?r.a.createElement(u.a,{to:k("appRoot")}):r.a.createElement("div",{className:Q.a.container},r.a.createElement("form",{onSubmit:this.login},r.a.createElement("div",{className:Q.a.header},"Login"),r.a.createElement("input",{placeholder:"Username",type:"text",name:"username",onChange:function(t){return e.setState({username:t.target.value})}}),r.a.createElement("input",{placeholder:"Password",type:"password",name:"password",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement("input",{className:Q.a.submit,type:"submit",name:"submit"})))}}]),t}(r.a.Component),X=n(14),Y=n(15),$=n(12),ee=n.n($),te=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"getAll",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/devices"),{headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a.devices);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(p.a)(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/devices/").concat(t),{headers:{Authorization:n,"Content-Type":"application/json"}});case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(p.a)(l.a.mark(function e(t,n){var a,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(a=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/devices/").concat(t),{method:"PUT",headers:{Authorization:a,"Content-Type":"application/json"},body:JSON.stringify(n)});case 5:return r=e.sent,e.next=8,r.json();case 8:return c=e.sent,e.abrupt("return",c);case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),ne=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"get",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/fast_properties"),{headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.json();case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"put",value:function(){var e=Object(p.a)(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/fast_properties"),{method:"PUT",headers:{Authorization:n,"Content-Type":"application/json"},body:JSON.stringify(t)});case 5:return a=e.sent,e.next=8,a.json();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),ae=n(25),re=n.n(ae),ce=function(e){return r.a.createElement("div",{className:re.a.row},r.a.createElement("div",{className:re.a.inputDescription},e.description),r.a.createElement("div",{className:re.a.inputField},e.input))},oe=n(26),ie=n.n(oe),ue=function(e){return r.a.createElement("span",{className:[ie.a.container,e.value?ie.a.selected:""].join(" "),onClick:function(){return e.onChange(!e.value)}},r.a.createElement("div",{className:ie.a.knob}))},se=(n(13),new Set(["CCM"])),le=new Set(["up","of","in","on"]);function pe(e){return"string"!==typeof e?e:e.split(" ").map(function(e){return(t=e).length<=2&&!le.has(t.toLowerCase())||se.has(t.toUpperCase())?e:e[0].toUpperCase()+e.slice(1).toLowerCase();var t}).join(" ")}function me(e){return"string"!==typeof e?e:e.replace(/_/g," ")}function he(e){var t=!0;return e.split("").map(function(e){return e.toUpperCase()===e?t?e.toLowerCase():(t=!0,"_"+e.toLowerCase()):(t=!1,e.toLowerCase())}).join("")}var fe=n(40),ve=n.n(fe),de=function(e){return r.a.createElement("div",{className:ve.a.container},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},be=n(8),ge=n.n(be),Ee=function(){return r.a.createElement("svg",{height:"64px",width:"64px"},r.a.createElement("path",{transform:"translate(0, 64), scale(0.064, -0.064)",d:"M512 853q51 -7 97 -18t90 -26l-7 2q40 -13 75 -29.5t67 -37.5l-2 2v-396q-23 -45 -54 -84t-68 -70l-1 -1q-42 -34 -90.5 -61.5t-101.5 -46.5l-5 -2q-57 20 -106 47.5t-92 61.5l1 -1q-38 33 -69 71.5t-53 83.5l-1 3v395q30 19 64.5 35.5t71.5 28.5l4 1q39 13 83.5 24 t91.5 18h5v0zM512 896q-54 -7 -103.5 -18t-96.5 -27l8 2q-49 -15 -92 -36.5t-81 -49.5l2 1v-427q25 -53 59.5 -97.5t77.5 -79.5l1 -1q48 -38 103.5 -68.5t116.5 -50.5l5 -1q65 21 121 51.5t105 69.5l-2 -1q44 36 78.5 80t58.5 95l2 3v427q-37 27 -79 48.5t-88 35.5l-4 1 q-41 14 -89 25t-98 17l-5 1v0zM542 491l135 134q3 3 4.5 7t1.5 9q0 9 -6.5 15t-14.5 6q-5 0 -9 -1.5t-7 -4.5v0l-134 -135l-136 136q-3 3 -6.5 4.5t-8.5 1.5q-9 0 -15 -6.5t-6 -15.5q0 -4 1.5 -8t4.5 -7l136 -135l-136 -136q-2 -3 -3 -6t-1 -7q0 -9 6 -15t15 -6q4 0 7 1t6 3 v0l136 135l136 -135q3 -3 6.5 -5t8.5 -2q9 0 15 6.5t6 15.5q0 4 -1.5 8t-4.5 7v0z"}))},_e=function(){return r.a.createElement("svg",{height:"64px",width:"64px"},r.a.createElement("path",{transform:"translate(0, 64), scale(0.064, -0.064)",d:"M597 640q0 -35 -25 -60t-60 -25t-60 25t-25 60t25 60t60 25t60 -25t25 -60v0zM704 853q-41 14 -89 25t-98 17l-5 1q-54 -7 -103.5 -18t-96.5 -27l8 2q-49 -15 -92 -36.5t-81 -49.5l2 1v-427q25 -53 59.5 -97.5t77.5 -79.5l1 -1q48 -38 103.5 -68.5t116.5 -50.5l5 -1 q65 21 121 51.5t105 69.5l-2 -1q44 36 78.5 80t58.5 95l2 3v427q-37 27 -79 48.5t-88 35.5l-4 1v0zM832 352q-23 -46 -53.5 -84.5t-68.5 -70.5v0q-25 -21 -52.5 -39t-56.5 -33l-4 -1v175q0 -18 12.5 -30.5t30.5 -12.5t30.5 12.5t12.5 30.5v0v170q0 18 -12.5 30.5t-30.5 12.5 v0h-256q-18 0 -30.5 -12.5t-12.5 -30.5v0v-170q0 -18 12.5 -30.5t30.5 -12.5t30.5 12.5t12.5 30.5v0v-175q-32 15 -60 33t-53 39l1 -1q-38 32 -68.5 70.5t-53.5 82.5l-1 3v395q30 19 64.5 35.5t71.5 28.5l4 1q39 13 83.5 24t91.5 18h5q51 -7 97 -18t90 -26l-7 2 q40 -13 75 -29.5t67 -37.5l-2 2v-394z"}))},we=function(){return r.a.createElement("svg",{height:"64px",width:"64px"},r.a.createElement("path",{transform:"translate(0, 64), scale(0.064, -0.064)",d:"M704 853q-41 14 -89 25t-98 17l-5 1q-54 -7 -103.5 -18t-96.5 -27l8 2q-49 -15 -92 -36.5t-81 -49.5l2 1v-427q25 -53 59.5 -97.5t77.5 -79.5l1 -1q48 -38 103.5 -68.5t116.5 -50.5l5 -1q65 21 121 51.5t105 69.5l-2 -1q44 36 78.5 80t58.5 95l2 3v427q-37 27 -79 48.5 t-88 35.5l-4 1v0zM512 85q-41 15 -76.5 32t-68.5 38l3 -1l43 78l99 -97v-50v0zM832 348q-23 -46 -54 -84.5t-68 -69.5l-1 -1q-24 -19 -51.5 -36.5t-56.5 -31.5l-4 -1v29q0 9 -3 16.5t-9 13.5l-73 73l47 85l38 -42h86q17 0 29.5 12.5t12.5 29.5q0 18 -12.5 30.5t-29.5 12.5v0 h-47l-34 35l28 51q3 4 4.5 9.5t1.5 10.5q0 11 -5.5 20.5t-13.5 15.5v0l-105 71h-136l-77 -143q-3 -5 -4.5 -10t-1.5 -11q0 -18 12.5 -30.5t30.5 -12.5q12 0 22 5.5t15 15.5v0l54 101h42l-168 -304q-33 30 -60 65t-48 75l-1 3v395q30 19 64.5 35.5t71.5 28.5l4 1 q39 13 83.5 24t91.5 18h5q51 -7 97 -18t90 -26l-7 2q40 -13 75 -29.5t67 -37.5l-2 2v-398zM725 640q0 -35 -25 -60t-60 -25t-60 25t-25 60t25 60t60 25t60 -25t25 -60v0z"}))},xe=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"setAlarmMode",value:function(){var e=Object(p.a)(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/alarm/").concat(t),{method:"POST",headers:{Authorization:n}});case 5:return a=e.sent,e.next=8,a.text();case 8:return r=e.sent,e.abrupt("return",JSON.parse(r).mode);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getAlarmMode",value:function(){var e=Object(p.a)(l.a.mark(function e(){var t,n,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath"),"/api/alarm"),{method:"GET",headers:{Authorization:t}});case 5:return n=e.sent,e.next=8,n.text();case 8:return a=e.sent,e.abrupt("return",JSON.parse(a).mode);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}]),e}()),ke=function(e){return new Promise(function(t){return setTimeout(t,e)})},Oe=function(){var e=Object(a.useState)(null),t=Object(b.a)(e,2),n=t[0],c=t[1];n||xe.getAlarmMode().then(c);var o=function(e){return Object(p.a)(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c(e),t.next=3,xe.setAlarmMode(e);case 3:return e=t.sent,c(e),t.next=7,ke(45e3);case 7:return t.next=9,xe.getAlarmMode();case 9:e=t.sent,c(e);case 11:case"end":return t.stop()}},t)}))};return r.a.createElement("div",{className:ge.a.container},r.a.createElement("div",{onClick:o("none"),className:"".concat(ge.a.icon," ").concat("none"===n?"".concat(ge.a.disarmed," ").concat(ge.a.selected):"")},r.a.createElement(Ee,null)),r.a.createElement("div",{onClick:o("some"),className:"".concat(ge.a.icon," ").concat("some"===n?"".concat(ge.a.home," ").concat(ge.a.selected):"")},r.a.createElement(_e,null)),r.a.createElement("div",{onClick:o("all"),className:"".concat(ge.a.icon," ").concat("all"===n||"exit_delay"===n?"".concat(ge.a.away," ").concat(ge.a.selected):"")},r.a.createElement(we,null)),r.a.createElement("div",{className:ge.a.subtext},"none"===n?"Disarmed":"some"===n?"Home":"all"===n?"Away":"exit_delay"===n?"Exit Delay":null))},ye=function(){var e=Object(a.useState)("NONE"),t=Object(b.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(b.a)(o,2),u=i[0],s=i[1],m=Object(a.useState)(null),h=Object(b.a)(m,2),f=h[0],v=h[1],d=Object(a.useState)({}),g=Object(b.a)(d,2),E=g[0],_=g[1];Object(a.useEffect)(function(){te.get("livingRoomLight").then(function(e){return v(e.status)}).catch(function(e){return console.error(e)})},[v]),Object(a.useEffect)(function(){ne.get().then(_).catch(function(e){return console.error(e)})},[_]),Object(a.useEffect)(function(){function e(){return(e=Object(p.a)(l.a.mark(function e(){var t,n,a,r,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.getTotalCameras();case 2:for(t=e.sent,n=[],a=function(e){n.push(Object(p.a)(l.a.mark(function t(){var n,a;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,R.getCameraImage(e);case 3:return n=t.sent,a=URL.createObjectURL(n),t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(0),t.abrupt("return","");case 11:case"end":return t.stop()}},t,null,[[0,8]])}))())},r=0;r<t;r++)a(r);return e.next=8,Promise.all(n);case 8:c=e.sent,s(c);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[s]);var w=function(e){return function(t){var n=Object(Y.a)({},E,Object(X.a)({},e,t));_(n),ne.put(n)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:ee.a.imageContainer},u.map(function(e,t){return r.a.createElement("img",{className:ee.a.image,key:t,alt:"cam",src:e})})),r.a.createElement("div",{className:ee.a.comingHomeContainer},"FAILURE"===n||"NONE"===n?r.a.createElement("input",{type:"submit",value:"Coming Home",onClick:function(){c("PENDING"),F.comingHome().then(function(){return c("SUCCESS")}).catch(function(e){c("FAILURE"),console.error(e)})}}):"PENDING"===n?r.a.createElement(de,null):null,"SUCCESS"===n?r.a.createElement("div",{className:ee.a.response},"See you soon!"):"FAILURE"===n?r.a.createElement("div",{className:ee.a.responseError},"Please try again."):null),r.a.createElement("div",{className:ee.a.lightsSection},r.a.createElement(ce,{description:"Living Room Lights",input:null!==f?r.a.createElement(ue,{value:f,onChange:function(e){v(e),te.put("livingRoomLight",{status:e})}}):null}),["livingRoomLightsMotionOn","livingRoomLightsMotionOff"].map(function(e){return r.a.createElement(ce,{key:e,description:(t=e,pe(me(he(t)))),input:"boolean"===typeof E[e]?r.a.createElement(ue,{value:E[e],onChange:w(e)}):null});var t})),r.a.createElement(Oe,null))},je=function(){return j.clearAuth(),r.a.createElement(u.a,{to:"".concat(k("appRoot"),"/login")})},Se=new(function(){function e(){Object(m.a)(this,e)}return Object(h.a)(e,[{key:"healthcheck",value:function(){var e=Object(p.a)(l.a.mark(function e(t){var n,a,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(n=j.getToken())){e.next=3;break}throw new Error("UNAUTHORIZED");case 3:return e.next=5,fetch("".concat(k("serverPath",t),"/healthcheck"),{headers:{Authorization:n}});case 5:return a=e.sent,e.next=8,a.text();case 8:return r=e.sent,e.abrupt("return",r);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),e}()),qe=n(19),Ne=n.n(qe),Ce=0,Te=6e4,Ae=function(){var e=Object(a.useState)(),t=Object(b.a)(e,2),n=t[0],c=t[1];function o(){return i.apply(this,arguments)}function i(){return(i=Object(p.a)(l.a.mark(function e(){var t,n,a,r,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Date.now(),!(Ce+Te>t)){e.next=3;break}return e.abrupt("return",setTimeout(o,1e3));case 3:Ce=t,n=["dev","local","prod"],a=!1,r=0;case 7:if(!(r<n.length)){e.next=23;break}return e.prev=8,i=n[r],e.next=12,Se.healthcheck(i);case 12:return c(i),x(i),a=!0,e.abrupt("break",23);case 18:e.prev=18,e.t0=e.catch(8);case 20:r++,e.next=7;break;case 23:a||(c("offline"),x("prod")),setTimeout(o,1e3);case 25:case"end":return e.stop()}},e,null,[[8,18]])}))).apply(this,arguments)}if(!n)return o(),null;var u="prod"===n?Ne.a.blue:"local"===n?Ne.a.green:"offline"===n?Ne.a.red:"dev"===n?Ne.a.black:"";return r.a.createElement("div",{className:[Ne.a.circle,u].join(" ")})},Re=n(41),Ue=n.n(Re),De=n(42),Ie=n.n(De),Pe=function(e){return r.a.createElement("input",{type:"text",className:Ie.a.container,onChange:function(t){return e.onChange((n=t.target.value,"number"===typeof e.value?parseFloat(n):n));var n},value:e.value})},He=function(){var e=Object(a.useState)({}),t=Object(b.a)(e,2),n=t[0],c=t[1],o=0,i=function(e){return function(t){var a=Object(Y.a)({},n,Object(X.a)({},e,t));c(a),clearTimeout(o),o=window.setTimeout(function(){return ne.put(a)},1e3)}};return Object.keys(n).length||ne.get().then(c),r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:Ue.a.container},Object.keys(n).map(function(e){return r.a.createElement(ce,{key:e,description:(t=e,pe(me(he(t)))),input:"boolean"===typeof n[e]?r.a.createElement(ue,{value:n[e],onChange:i(e)}):r.a.createElement(Pe,{value:n[e],onChange:i(e)})});var t})))},Le=n(43),Me=n.n(Le),ze=function(){var e=Object(a.useState)([]),t=Object(b.a)(e,2),n=t[0],c=t[1];n.length||te.getAll().then(c);return r.a.createElement(r.a.Fragment,null,r.a.createElement(A,null),r.a.createElement("div",{className:Me.a.container},n.map(function(e){return r.a.createElement(ce,{key:e.id,description:e.name,input:"boolean"===typeof e.status?r.a.createElement(ue,{value:e.status,onChange:(t=e.id,function(e){var a=n.findIndex(function(e){return e.id===t}),r=Object(Y.a)({},n[a]);r.status=e;var o=n.slice();o.splice(a,1,r),te.put(r.id,{status:e}),c(o)})}):null});var t})))},Ze=function(){return r.a.createElement(i.a,null,r.a.createElement(Ae,null),r.a.createElement(u.b,{path:k("appRoot"),exact:!0,component:ye}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/login"),exact:!0,component:B}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/logout"),exact:!0,component:je}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/cams"),exact:!0,component:I}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/gate"),exact:!0,component:M}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/doorman"),exact:!0,component:G}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/devices"),exact:!0,component:ze}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/settings"),exact:!0,component:He}),r.a.createElement(u.b,{path:"".concat(k("appRoot"),"/nearby"),exact:!0,component:J}))},Fe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ze,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/home",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/home","/service-worker.js");Fe?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ge(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ge(t,e)})}}()}],[[44,1,2]]]);
//# sourceMappingURL=main.ecf6e034.chunk.js.map